<!DOCTYPE html>
<html lang="en">
<head>
  <title>existence</title>
  <meta charset="UTF-8">
  <link rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<style>
*{
    margin: 0px;
    padding: 0px;
    /* border: 0px; */
    outline: none;
}
  #donut {    
    width: 300px; 
    aspect-ratio: 1;
    transition: 1s;
    border-radius: 50%;
    /* display: flex; */
    align-items: center;
    justify-content: center;
  } 

  #donut::before {
    content: "";
    width: 180px; height: 180px;
    border-radius: 50%;
    background: #fff;
  }
  #legend {
    display: flex;
    margin-top: 30px;
    margin-left: 5vw;
  }
  .txt{
    font-size: 4vw;
    color: white;
  }
  @media screen and (max-width:600px) {
    #donut{
      width: 96%;
      margin-left: 2%;
      margin-top: 2vw;
      aspect-ratio: 1;
    }
    #donut::before {
      content: "";
      width: 350px; height: 350px;
      border-radius: 50%;
      background: #fff;
    }

  }

  /* (C2) SEGMENTS */
  #legend div { padding: 0 10px; }
  .segment1 { background: red; }
  .segment2 { background: green; }
  .segment3 { background: blue; }
  .segment4 { background: grey; }

.lb{
  font-size: 8vw; text-align: center; font-family: Arial, Helvetica, sans-serif;
  margin-top: 1vw; 
}


</style>
<body id="body" style="background-color: rgb(2, 0, 48);">



  <div id="donut">
    <div style="width: 80%; margin-left: 10%; background: radial-gradient(circle at center, #ffffff 30%, rgb(2, 0, 48)70%); border-radius: 100%; margin-top: 10%; float: left; aspect-ratio: 1;">
       <div style="width: 50%; float: left; margin-left: 25%; margin-top: 25%; aspect-ratio: 1; font-size: 2vw; ">
            <div style="display: block; width: 100%;" ><label class="lb" style=" margin-left: 3vw; color: red;" id="altin">5000</label> <p class="lb" style=" color: red; display: inline-block;">₺</p> </div>
            <div style="display: block;" ><label class="lb" style=" margin-left: 3vw;  color: green;" id="tkm">5000</label> <p class="lb" style=" color: green; display: inline-block;">₺</p> </div>

            <div style="display: block;" ><label class="lb" style=" margin-left: 3vw; color: blue;" id="tua">5000</label> <p class="lb" style=" color: blue; display: inline-block;">₺</p> </div>

            <div style="display: block;" ><label class="lb" style=" margin-left: 3vw; color: grey;" id="tyh">5000</label> <p class="lb" style=" color: grey; display: inline-block;">₺</p> </div>
       </div>
    </div>
  </div>
  <div id="legend">
    <div  class="segment1"></div> <div class="txt">Altın</div>
    <div  class="segment2"></div> <div class="txt">TKM Hisse</div>
    <div  class="segment3"></div> <div class="txt">TUA Altın</div>
    <div  class="segment4"></div> <div class="txt">TYH</div>
  </div>
  <p style="width: 100%; text-align: center; font-size: 8vw; margin-top: 3vw; font-family: Arial, Helvetica, sans-serif; color: white;" id="toplam">120000</p>
  <hr>

  <div id="vis" style="visibility: hidden; margin-left: 5vw; margin-top: 5vw;">
    <div class="custom-select" style="width:200px; overflow: hidden;">
        <select id="select">
          <option value="0">DEFAULT</option>
          <option value="1">Altın</option>
          <option value="2">TKM Hisse</option>
          <option value="3">TUA Altın</option>
          <option value="4">TYH </option>
          <option value="5">KUR</option>
        </select>
        <input type="number" id="input1">
    </div>
    <br>
    <button id="calc">calculate</button>
  </div>

</body>

<script>

  var donut = document.getElementById("donut");
  var input1 = document.getElementById("input1");
  var body = document.getElementById("body");
  var calc = document.getElementById("calc");
  var select = document.getElementById("select");
  var altin = document.getElementById("altin");
  var tkm = document.getElementById("tkm");
  var tua = document.getElementById("tua");
  var tyh = document.getElementById("tyh");
  var legend = document.getElementById("legend");
  var vis = document.getElementById("vis");
  var toplama = document.getElementById("toplam");

  var counter = 0;
  var toplam;
  var sonuc;
  var deg1 = 0,deg2 = 0,deg3 = 0;
  var kur = 3100;
  var gold = 0,TKM = 0,TUA = 0,TYH = 0;
  console.log(document.cookie);
  getcookie();

  legend.onclick = function(){
    vis.style.visibility = "visible";
  }
 
  function getcookie(type,valu){
    var kuki = document.cookie;
    var spkuki = kuki.split(" ");
    //console.log(spkuki); 
    for (let index = 0; index < spkuki.length; index++) {
      var spp = spkuki[index].split("=");
      try {
        spp[1]=spp[1].replace(";","");
      } catch (error) {
        
      }
      
      spp[1]=parseInt(spp[1])
      switch (spp[0]) {
        case "KUR":
          kur = spp[1];
          break;
        case "gold":
          gold = spp[1];
          break;
        case "TKM":
          TKM = spp[1];
          break;
        case "TUA":
          TUA = spp[1];
          break;
        case "TYH":
          TYH = spp[1];
          break;
      
        default:
          break;
      }
    }



    var value1 = 86800,value2 = 5000,value3 = 20000,value4 = 10000;
    var goldd = gold*kur;
    toplam = goldd+TKM+TUA+TYH;
    console.log(toplam);   
    sonuc = 360/toplam;  
    console.log(goldd);
    console.log(TKM);
    console.log(TUA);
    console.log(TYH);
    altin.innerHTML = goldd;
    tkm.innerHTML = TKM;
    tua.innerHTML = TUA;
    tyh.innerHTML = TYH;
    toplama.innerHTML = toplam+"₺"
    deg1 = sonuc*goldd;
    deg2 = sonuc*TKM + deg1;
    deg3 = sonuc*TUA + deg2;
    donut.style.background =  "conic-gradient(red 0deg "+deg1 +"deg, green "+deg1+"deg "+deg2+"deg, blue "+deg2+"deg "+deg3+"deg, grey "+deg3+"deg 360deg)";



    
  }
  
  calc.onclick = function(){
    var si;
    switch (select.selectedIndex) {
      case 1:
        si = "gold";
        break;
      case 2:
        si = "TKM";
        break;
      case 3:
        si = "TUA";
        break;  
      case 4:
        si = "TYH";
        break;
      case 5:
        si = "KUR";
        break;   
    
      default:
        break;
    }
   setcookie(si,input1.value);  
   vis.style.visibility = "hidden"; 
  }
  console.log(document.cookie);


  function setcookie(type,valu){
    var kuki = document.cookie;
    var spkuki = kuki.split(" ");
    var old;
    for (let index = 0; index < spkuki.length; index++) {
      var spp = spkuki[index].split("=");
      if(spp[0] == type){
        alert(type);
        old = spp[1];
      }
      
    }
    document.cookie = type+ "="+ old+" path=/; expires=Thu, 31 Dec 2020 23:59:59 UTC";
    document.cookie = type+ "="+ valu+"; path=/; expires=Thu, 31 Dec 2026 23:59:59 UTC";
    console.log(document.cookie);
    getcookie();
    
  }
  
  

  // deg1 = 60;
  // deg2 = 190;
  // deg3 = 250;
  //donut.style.background =  "conic-gradient(red 0deg "+deg1 +"deg, green "+deg1+"deg "+deg2+"deg, blue "+deg2+"deg "+deg3+"deg, grey "+deg3+"deg 360deg)";


 // donut.style.background =  "conic-gradient(red 0deg 60deg, green 60deg 190deg, blue 190deg 250deg,orange 250deg 310deg,grey 250deg 360deg)";

 //goldapi-112sql19m5zty9o6-io



//  input1.addEventListener("input", function(event) {
//     let value = input1.value;

//     // Sayıya sadece rakamları ve virgül/ noktayı kabul ediyoruz
//     value = value.replace(/[^0-9]/g, ''); // Tüm harfleri sileriz
    
//     // Sayıyı formatlayıp, tekrar input alanına yazarız
//     const formattedValue = formatNumber(value);
//     input1.value = formattedValue;
//   });

//   // Sayıyı binlik ayracı ile formatlama fonksiyonu
//   function formatNumber(value) {
//     if (value === "") return "";

//     return Number(value)
//       .toLocaleString('tr-TR'); // 'tr-TR' formatıyla binlik ayraç kullanılır
//   }



</script>




</html>
